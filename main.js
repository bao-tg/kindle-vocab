/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Lr=Object.create;var Re=Object.defineProperty;var Fr=Object.getOwnPropertyDescriptor;var Ir=Object.getOwnPropertyNames;var Nr=Object.getPrototypeOf,Ur=Object.prototype.hasOwnProperty;var Ln=(R,v)=>()=>(v||R((v={exports:{}}).exports,v),v.exports),Br=(R,v)=>{for(var m in v)Re(R,m,{get:v[m],enumerable:!0})},Fn=(R,v,m,_)=>{if(v&&typeof v=="object"||typeof v=="function")for(let E of Ir(v))!Ur.call(R,E)&&E!==m&&Re(R,E,{get:()=>v[E],enumerable:!(_=Fr(v,E))||_.enumerable});return R};var Ae=(R,v,m)=>(m=R!=null?Lr(Nr(R)):{},Fn(v||!R||!R.__esModule?Re(m,"default",{value:R,enumerable:!0}):m,R)),zr=R=>Fn(Re({},"__esModule",{value:!0}),R);var Pe=Ln((Oe,ee)=>{var Me=void 0,Te=function(R){return Me||(Me=new Promise(function(v,m){var _=typeof R!="undefined"?R:{},E=_.onAbort;_.onAbort=function(t){m(new Error(t)),E&&E(t)},_.postRun=_.postRun||[],_.postRun.push(function(){v(_)}),ee=void 0;var i;i||(i=typeof _!="undefined"?_:{}),i.onRuntimeInitialized=function(){function t(l,p){this.Qa=l,this.db=p,this.Oa=1,this.kb=[]}function e(l,p){if(this.db=p,p=Y(l)+1,this.cb=Ee(p),this.cb===null)throw Error("Unable to allocate memory for the SQL string");K(l,A,this.cb,p),this.ib=this.cb,this.Za=this.ob=null}function n(l){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),l!=null){var p=this.filename,O=p?Vt("//"+p):"/";if(p=En(!0,!0),O=me(O,(p!==void 0?p:438)&4095|32768,0),l){if(typeof l=="string"){for(var q=Array(l.length),lt=0,Ut=l.length;lt<Ut;++lt)q[lt]=l.charCodeAt(lt);l=q}be(O,p|146),q=Zt(O,577),_n(q,l,0,l.length,0,void 0),We(q),be(O,p)}}this.handleError(u(this.filename,r)),this.db=S(r,"i32"),Cr(this.db),this.eb={},this.Wa={}}var r=Ht(4),o=i.cwrap,u=o("sqlite3_open","number",["string","number"]),b=o("sqlite3_close_v2","number",["number"]),N=o("sqlite3_exec","number",["number","string","number","number","number"]),nt=o("sqlite3_changes","number",["number"]),z=o("sqlite3_prepare_v2","number",["number","string","number","number","number"]),At=o("sqlite3_sql","string",["number"]),Lt=o("sqlite3_normalized_sql","string",["number"]),Gt=o("sqlite3_prepare_v2","number",["number","number","number","number","number"]),sr=o("sqlite3_bind_text","number",["number","number","number","number","number"]),Tn=o("sqlite3_bind_blob","number",["number","number","number","number","number"]),ur=o("sqlite3_bind_double","number",["number","number","number"]),lr=o("sqlite3_bind_int","number",["number","number","number"]),fr=o("sqlite3_bind_parameter_index","number",["number","string"]),cr=o("sqlite3_step","number",["number"]),dr=o("sqlite3_errmsg","string",["number"]),hr=o("sqlite3_column_count","number",["number"]),pr=o("sqlite3_data_count","number",["number"]),mr=o("sqlite3_column_double","number",["number","number"]),On=o("sqlite3_column_text","string",["number","number"]),yr=o("sqlite3_column_blob","number",["number","number"]),gr=o("sqlite3_column_bytes","number",["number","number"]),br=o("sqlite3_column_type","number",["number","number"]),wr=o("sqlite3_column_name","string",["number","number"]),_r=o("sqlite3_reset","number",["number"]),vr=o("sqlite3_clear_bindings","number",["number"]),kr=o("sqlite3_finalize","number",["number"]),Er=o("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Sr=o("sqlite3_value_type","number",["number"]),xr=o("sqlite3_value_bytes","number",["number"]),Rr=o("sqlite3_value_text","string",["number"]),Ar=o("sqlite3_value_blob","number",["number"]),qr=o("sqlite3_value_double","number",["number"]),Mr=o("sqlite3_result_double","",["number","number"]),Pn=o("sqlite3_result_null","",["number"]),Tr=o("sqlite3_result_text","",["number","string","number","number"]),Or=o("sqlite3_result_blob","",["number","number","number","number"]),Pr=o("sqlite3_result_int","",["number","number"]),Cn=o("sqlite3_result_error","",["number","string","number"]),Cr=o("RegisterExtensionFunctions","number",["number"]);t.prototype.bind=function(l){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(l)?this.Cb(l):l!=null&&typeof l=="object"?this.Db(l):!0},t.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var l=cr(this.Qa);switch(l){case 100:return!0;case 101:return!1;default:throw this.db.handleError(l)}},t.prototype.yb=function(l){return l==null&&(l=this.Oa,this.Oa+=1),mr(this.Qa,l)},t.prototype.Gb=function(l){if(l==null&&(l=this.Oa,this.Oa+=1),l=On(this.Qa,l),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(l)},t.prototype.Hb=function(l){return l==null&&(l=this.Oa,this.Oa+=1),On(this.Qa,l)},t.prototype.getBlob=function(l){l==null&&(l=this.Oa,this.Oa+=1);var p=gr(this.Qa,l);l=yr(this.Qa,l);for(var O=new Uint8Array(p),q=0;q<p;q+=1)O[q]=k[l+q];return O},t.prototype.get=function(l,p){p=p||{},l!=null&&this.bind(l)&&this.step(),l=[];for(var O=pr(this.Qa),q=0;q<O;q+=1)switch(br(this.Qa,q)){case 1:var lt=p.useBigInt?this.Gb(q):this.yb(q);l.push(lt);break;case 2:l.push(this.yb(q));break;case 3:l.push(this.Hb(q));break;case 4:l.push(this.getBlob(q));break;default:l.push(null)}return l},t.prototype.getColumnNames=function(){for(var l=[],p=hr(this.Qa),O=0;O<p;O+=1)l.push(wr(this.Qa,O));return l},t.prototype.getAsObject=function(l,p){l=this.get(l,p),p=this.getColumnNames();for(var O={},q=0;q<p.length;q+=1)O[p[q]]=l[q];return O},t.prototype.getSQL=function(){return At(this.Qa)},t.prototype.getNormalizedSQL=function(){return Lt(this.Qa)},t.prototype.run=function(l){return l!=null&&this.bind(l),this.step(),this.reset()},t.prototype.tb=function(l,p){p==null&&(p=this.Oa,this.Oa+=1),l=Rn(l);var O=ct(l);this.kb.push(O),this.db.handleError(sr(this.Qa,p,O,l.length-1,0))},t.prototype.Bb=function(l,p){p==null&&(p=this.Oa,this.Oa+=1);var O=ct(l);this.kb.push(O),this.db.handleError(Tn(this.Qa,p,O,l.length,0))},t.prototype.sb=function(l,p){p==null&&(p=this.Oa,this.Oa+=1),this.db.handleError((l===(l|0)?lr:ur)(this.Qa,p,l))},t.prototype.Eb=function(l){l==null&&(l=this.Oa,this.Oa+=1),Tn(this.Qa,l,0,0,0)},t.prototype.ub=function(l,p){switch(p==null&&(p=this.Oa,this.Oa+=1),typeof l){case"string":this.tb(l,p);return;case"number":this.sb(l,p);return;case"bigint":this.tb(l.toString(),p);return;case"boolean":this.sb(l+0,p);return;case"object":if(l===null){this.Eb(p);return}if(l.length!=null){this.Bb(l,p);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+l+")."},t.prototype.Db=function(l){var p=this;return Object.keys(l).forEach(function(O){var q=fr(p.Qa,O);q!==0&&p.ub(l[O],q)}),!0},t.prototype.Cb=function(l){for(var p=0;p<l.length;p+=1)this.ub(l[p],p+1);return!0},t.prototype.reset=function(){return this.freemem(),vr(this.Qa)===0&&_r(this.Qa)===0},t.prototype.freemem=function(){for(var l;(l=this.kb.pop())!==void 0;)le(l)},t.prototype.free=function(){this.freemem();var l=kr(this.Qa)===0;return delete this.db.eb[this.Qa],this.Qa=0,l},e.prototype.next=function(){if(this.cb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var l=fe(),p=Ht(4);g(r),g(p);try{this.db.handleError(Gt(this.db.db,this.ib,-1,r,p)),this.ib=S(p,"i32");var O=S(r,"i32");return O===0?(this.mb(),{done:!0}):(this.Za=new t(O,this.db),this.db.eb[O]=this.Za,{value:this.Za,done:!1})}catch(q){throw this.ob=y(this.ib),this.mb(),q}finally{ce(l)}},e.prototype.mb=function(){le(this.cb),this.cb=null},e.prototype.getRemainingSQL=function(){return this.ob!==null?this.ob:y(this.ib)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(e.prototype[Symbol.iterator]=function(){return this}),n.prototype.run=function(l,p){if(!this.db)throw"Database closed";if(p){l=this.prepare(l,p);try{l.step()}finally{l.free()}}else this.handleError(N(this.db,l,0,0,r));return this},n.prototype.exec=function(l,p,O){if(!this.db)throw"Database closed";var q=fe(),lt=null;try{var Ut=Y(l)+1,Ot=Ht(Ut);K(l,k,Ot,Ut);var ie=Ot,te=Ht(4);for(l=[];S(ie,"i8")!==0;){g(r),g(te),this.handleError(Gt(this.db,ie,-1,r,te));var qt=S(r,"i32");if(ie=S(te,"i32"),qt!==0){for(Ut=null,lt=new t(qt,this),p!=null&&lt.bind(p);lt.step();)Ut===null&&(Ut={columns:lt.getColumnNames(),values:[]},l.push(Ut)),Ut.values.push(lt.get(null,O));lt.free()}}return l}catch(Bt){throw lt&&lt.free(),Bt}finally{ce(q)}},n.prototype.each=function(l,p,O,q,lt){typeof p=="function"&&(q=O,O=p,p=void 0),l=this.prepare(l,p);try{for(;l.step();)O(l.getAsObject(null,lt))}finally{l.free()}if(typeof q=="function")return q()},n.prototype.prepare=function(l,p){if(g(r),this.handleError(z(this.db,l,-1,r,0)),l=S(r,"i32"),l===0)throw"Nothing to prepare";var O=new t(l,this);return p!=null&&O.bind(p),this.eb[l]=O},n.prototype.iterateStatements=function(l){return new e(l,this)},n.prototype.export=function(){Object.values(this.eb).forEach(function(p){p.free()}),Object.values(this.Wa).forEach(a),this.Wa={},this.handleError(b(this.db));var l=or(this.filename);return this.handleError(u(this.filename,r)),this.db=S(r,"i32"),l},n.prototype.close=function(){this.db!==null&&(Object.values(this.eb).forEach(function(l){l.free()}),Object.values(this.Wa).forEach(a),this.Wa={},this.handleError(b(this.db)),pn("/"+this.filename),this.db=null)},n.prototype.handleError=function(l){if(l===0)return null;throw l=dr(this.db),Error(l)},n.prototype.getRowsModified=function(){return nt(this.db)},n.prototype.create_function=function(l,p){Object.prototype.hasOwnProperty.call(this.Wa,l)&&(a(this.Wa[l]),delete this.Wa[l]);var O=s(function(q,lt,Ut){for(var Ot,ie=[],te=0;te<lt;te+=1){var qt=S(Ut+4*te,"i32"),Bt=Sr(qt);if(Bt===1||Bt===2)qt=qr(qt);else if(Bt===3)qt=Rr(qt);else if(Bt===4){Bt=qt,qt=xr(Bt),Bt=Ar(Bt);for(var Dn=new Uint8Array(qt),xe=0;xe<qt;xe+=1)Dn[xe]=k[Bt+xe];qt=Dn}else qt=null;ie.push(qt)}try{Ot=p.apply(null,ie)}catch(Dr){Cn(q,Dr,-1);return}switch(typeof Ot){case"boolean":Pr(q,Ot?1:0);break;case"number":Mr(q,Ot);break;case"string":Tr(q,Ot,-1,-1);break;case"object":Ot===null?Pn(q):Ot.length!=null?(lt=ct(Ot),Or(q,lt,Ot.length,-1),le(lt)):Cn(q,"Wrong API use : tried to return a value of an unknown type ("+Ot+").",-1);break;default:Pn(q)}});return this.Wa[l]=O,this.handleError(Er(this.db,l,p.length,1,0,O,0,0,0)),this},i.Database=n};var U={},h;for(h in i)i.hasOwnProperty(h)&&(U[h]=i[h]);var j="./this.program",Q=typeof window=="object",B=typeof importScripts=="function",it=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",G="",mt,W,yt,gt,Et;it?(G=B?require("path").dirname(G)+"/":__dirname+"/",mt=function(t,e){return gt||(gt=require("fs")),Et||(Et=require("path")),t=Et.normalize(t),gt.readFileSync(t,e?null:"utf8")},yt=function(t){return t=mt(t,!0),t.buffer||(t=new Uint8Array(t)),t.buffer||L("Assertion failed: undefined"),t},W=function(t,e,n){gt||(gt=require("fs")),Et||(Et=require("path")),t=Et.normalize(t),gt.readFile(t,function(r,o){r?n(r):e(o.buffer)})},1<process.argv.length&&(j=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),typeof ee!="undefined"&&(ee.exports=i),i.inspect=function(){return"[Emscripten Module object]"}):(Q||B)&&(B?G=self.location.href:typeof document!="undefined"&&document.currentScript&&(G=document.currentScript.src),G=G.indexOf("blob:")!==0?G.substr(0,G.lastIndexOf("/")+1):"",mt=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},B&&(yt=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),W=function(t,e,n){var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=function(){r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)});var It=i.print||console.log.bind(console),tt=i.printErr||console.warn.bind(console);for(h in U)U.hasOwnProperty(h)&&(i[h]=U[h]);U=null,i.thisProgram&&(j=i.thisProgram);var bt=[],I;function a(t){I.delete(D.get(t)),bt.push(t)}function s(t){if(!I){I=new WeakMap;for(var e=0;e<D.length;e++){var n=D.get(e);n&&I.set(n,e)}}if(I.has(t))t=I.get(t);else{if(bt.length)e=bt.pop();else{try{D.grow(1)}catch(u){throw u instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":u}e=D.length-1}try{D.set(e,t)}catch(u){if(!(u instanceof TypeError))throw u;if(typeof WebAssembly.Function=="function"){var r={i:"i32",j:"i64",f:"f32",d:"f64"},o={parameters:[],results:[]};for(n=1;4>n;++n)o.parameters.push(r["viii"[n]]);n=new WebAssembly.Function(o,t)}else{for(r=[1,0,1,96],o={i:127,j:126,f:125,d:124},r.push(3),n=0;3>n;++n)r.push(o["iii"[n]]);r.push(0),r[1]=r.length-2,n=new Uint8Array([0,97,115,109,1,0,0,0].concat(r,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),n=new WebAssembly.Module(n),n=new WebAssembly.Instance(n,{e:{f:t}}).exports.f}D.set(e,n)}I.set(t,e),t=e}return t}var f;i.wasmBinary&&(f=i.wasmBinary);var w=i.noExitRuntime||!0;typeof WebAssembly!="object"&&L("no native wasm support detected");function g(t){var e="i32";switch(e.charAt(e.length-1)==="*"&&(e="i32"),e){case"i1":k[t>>0]=0;break;case"i8":k[t>>0]=0;break;case"i16":X[t>>1]=0;break;case"i32":d[t>>2]=0;break;case"i64":Rt=[0,(V=0,1<=+Math.abs(V)?0<V?(Math.min(+Math.floor(V/4294967296),4294967295)|0)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],d[t>>2]=Rt[0],d[t+4>>2]=Rt[1];break;case"float":H[t>>2]=0;break;case"double":ut[t>>3]=0;break;default:L("invalid type for setValue: "+e)}}function S(t,e){switch(e=e||"i8",e.charAt(e.length-1)==="*"&&(e="i32"),e){case"i1":return k[t>>0];case"i8":return k[t>>0];case"i16":return X[t>>1];case"i32":return d[t>>2];case"i64":return d[t>>2];case"float":return H[t>>2];case"double":return ut[t>>3];default:L("invalid type for getValue: "+e)}return null}var rt,St=!1;function xt(t){var e=i["_"+t];return e||L("Assertion failed: Cannot call unknown function "+(t+", make sure it is exported")),e}function F(t,e,n,r){var o={string:function(z){var At=0;if(z!=null&&z!==0){var Lt=(z.length<<2)+1;At=Ht(Lt),K(z,A,At,Lt)}return At},array:function(z){var At=Ht(z.length);return k.set(z,At),At}};t=xt(t);var u=[],b=0;if(r)for(var N=0;N<r.length;N++){var nt=o[n[N]];nt?(b===0&&(b=fe()),u[N]=nt(r[N])):u[N]=r[N]}return n=t.apply(null,u),n=function(z){return b!==0&&ce(b),e==="string"?y(z):e==="boolean"?!!z:z}(n)}var ot=0,x=1;function ct(t){var e=ot==x?Ht(t.length):Ee(t.length);return t.subarray||t.slice?A.set(t,e):A.set(new Uint8Array(t),e),e}var M=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function T(t,e,n){var r=e+n;for(n=e;t[n]&&!(n>=r);)++n;if(16<n-e&&t.subarray&&M)return M.decode(t.subarray(e,n));for(r="";e<n;){var o=t[e++];if(o&128){var u=t[e++]&63;if((o&224)==192)r+=String.fromCharCode((o&31)<<6|u);else{var b=t[e++]&63;o=(o&240)==224?(o&15)<<12|u<<6|b:(o&7)<<18|u<<12|b<<6|t[e++]&63,65536>o?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296|o>>10,56320|o&1023))}}else r+=String.fromCharCode(o)}return r}function y(t,e){return t?T(A,t,e):""}function K(t,e,n,r){if(!(0<r))return 0;var o=n;r=n+r-1;for(var u=0;u<t.length;++u){var b=t.charCodeAt(u);if(55296<=b&&57343>=b){var N=t.charCodeAt(++u);b=65536+((b&1023)<<10)|N&1023}if(127>=b){if(n>=r)break;e[n++]=b}else{if(2047>=b){if(n+1>=r)break;e[n++]=192|b>>6}else{if(65535>=b){if(n+2>=r)break;e[n++]=224|b>>12}else{if(n+3>=r)break;e[n++]=240|b>>18,e[n++]=128|b>>12&63}e[n++]=128|b>>6&63}e[n++]=128|b&63}}return e[n]=0,n-o}function Y(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);55296<=r&&57343>=r&&(r=65536+((r&1023)<<10)|t.charCodeAt(++n)&1023),127>=r?++e:e=2047>=r?e+2:65535>=r?e+3:e+4}return e}function dt(t){var e=Y(t)+1,n=Ee(e);return n&&K(t,k,n,e),n}var _t,k,A,X,d,H,ut;function J(){var t=rt.buffer;_t=t,i.HEAP8=k=new Int8Array(t),i.HEAP16=X=new Int16Array(t),i.HEAP32=d=new Int32Array(t),i.HEAPU8=A=new Uint8Array(t),i.HEAPU16=new Uint16Array(t),i.HEAPU32=new Uint32Array(t),i.HEAPF32=H=new Float32Array(t),i.HEAPF64=ut=new Float64Array(t)}var D,C=[],ht=[],$=[];function et(){var t=i.preRun.shift();C.unshift(t)}var Z=0,jt=null,vt=null;i.preloadedImages={},i.preloadedAudios={};function L(t){throw i.onAbort&&i.onAbort(t),tt(t),St=!0,new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info.")}function pt(){return st.startsWith("data:application/octet-stream;base64,")}var st;if(st="sql-wasm.wasm",!pt()){var ft=st;st=i.locateFile?i.locateFile(ft,G):G+ft}function wt(){var t=st;try{if(t==st&&f)return new Uint8Array(f);if(yt)return yt(t);throw"both async and sync fetching of the wasm failed"}catch(e){L(e)}}function Nt(){if(!f&&(Q||B)){if(typeof fetch=="function"&&!st.startsWith("file://"))return fetch(st,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+st+"'";return t.arrayBuffer()}).catch(function(){return wt()});if(W)return new Promise(function(t,e){W(st,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return wt()})}var V,Rt;function Wt(t){for(;0<t.length;){var e=t.shift();if(typeof e=="function")e(i);else{var n=e.Qb;typeof n=="number"?e.lb===void 0?D.get(n)():D.get(n)(e.lb):n(e.lb===void 0?null:e.lb)}}}function Pt(t){return t.replace(/\b_Z[\w\d_]+/g,function(e){return e===e?e:e+" ["+e+"]"})}function Xt(){function t(b){return(b=b.toTimeString().match(/\(([A-Za-z ]+)\)$/))?b[1]:"GMT"}var e=new Date().getFullYear(),n=new Date(e,0,1),r=new Date(e,6,1);e=n.getTimezoneOffset();var o=r.getTimezoneOffset(),u=Math.max(e,o);d[qn()>>2]=60*u,d[An()>>2]=Number(e!=o),n=t(n),r=t(r),n=dt(n),r=dt(r),o<e?(d[re()>>2]=n,d[re()+4>>2]=r):(d[re()>>2]=r,d[re()+4>>2]=n)}var se;function Ie(t,e){for(var n=0,r=t.length-1;0<=r;r--){var o=t[r];o==="."?t.splice(r,1):o===".."?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n;n--)t.unshift("..");return t}function Vt(t){var e=t.charAt(0)==="/",n=t.substr(-1)==="/";return(t=Ie(t.split("/").filter(function(r){return!!r}),!e).join("/"))||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function Kn(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1);return t=e[0],e=e[1],!t&&!e?".":(e&&(e=e.substr(0,e.length-1)),t+e)}function de(t){if(t==="/")return"/";t=Vt(t),t=t.replace(/\/$/,"");var e=t.lastIndexOf("/");return e===-1?t:t.substr(e+1)}function Yn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var t=new Uint8Array(1);return function(){return crypto.getRandomValues(t),t[0]}}if(it)try{var e=require("crypto");return function(){return e.randomBytes(1)[0]}}catch(n){}return function(){L("randomDevice")}}function he(){for(var t="",e=!1,n=arguments.length-1;-1<=n&&!e;n--){if(e=0<=n?arguments[n]:"/",typeof e!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!e)return"";t=e+"/"+t,e=e.charAt(0)==="/"}return t=Ie(t.split("/").filter(function(r){return!!r}),!e).join("/"),(e?"/":"")+t||"."}var nn=[];function rn(t,e){nn[t]={input:[],output:[],bb:e},ze(t,Xn)}var Xn={open:function(t){var e=nn[t.node.rdev];if(!e)throw new c(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.bb.flush(t.tty)},flush:function(t){t.tty.bb.flush(t.tty)},read:function(t,e,n,r){if(!t.tty||!t.tty.bb.zb)throw new c(60);for(var o=0,u=0;u<r;u++){try{var b=t.tty.bb.zb(t.tty)}catch(N){throw new c(29)}if(b===void 0&&o===0)throw new c(6);if(b==null)break;o++,e[n+u]=b}return o&&(t.node.timestamp=Date.now()),o},write:function(t,e,n,r){if(!t.tty||!t.tty.bb.pb)throw new c(60);try{for(var o=0;o<r;o++)t.tty.bb.pb(t.tty,e[n+o])}catch(u){throw new c(29)}return r&&(t.node.timestamp=Date.now()),o}},Jn={zb:function(t){if(!t.input.length){var e=null;if(it){var n=Buffer.alloc(256),r=0;try{r=gt.readSync(process.stdin.fd,n,0,256,null)}catch(o){if(o.toString().includes("EOF"))r=0;else throw o}0<r?e=n.slice(0,r).toString("utf-8"):e=null}else typeof window!="undefined"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`));if(!e)return null;t.input=Rn(e,!0)}return t.input.shift()},pb:function(t,e){e===null||e===10?(It(T(t.output,0)),t.output=[]):e!=0&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(It(T(t.output,0)),t.output=[])}},Zn={pb:function(t,e){e===null||e===10?(tt(T(t.output,0)),t.output=[]):e!=0&&t.output.push(e)},flush:function(t){t.output&&0<t.output.length&&(tt(T(t.output,0)),t.output=[])}};function on(t){t=65536*Math.ceil(t/65536);var e=Mn(65536,t);return e?(A.fill(0,e,e+t),e):0}var P={Ua:null,Va:function(){return P.createNode(null,"/",16895,0)},createNode:function(t,e,n,r){if((n&61440)===24576||(n&61440)===4096)throw new c(63);return P.Ua||(P.Ua={dir:{node:{Ta:P.La.Ta,Sa:P.La.Sa,lookup:P.La.lookup,fb:P.La.fb,rename:P.La.rename,unlink:P.La.unlink,rmdir:P.La.rmdir,readdir:P.La.readdir,symlink:P.La.symlink},stream:{Ya:P.Ma.Ya}},file:{node:{Ta:P.La.Ta,Sa:P.La.Sa},stream:{Ya:P.Ma.Ya,read:P.Ma.read,write:P.Ma.write,rb:P.Ma.rb,gb:P.Ma.gb,hb:P.Ma.hb}},link:{node:{Ta:P.La.Ta,Sa:P.La.Sa,readlink:P.La.readlink},stream:{}},vb:{node:{Ta:P.La.Ta,Sa:P.La.Sa},stream:rr}}),n=ln(t,e,n,r),Dt(n.mode)?(n.La=P.Ua.dir.node,n.Ma=P.Ua.dir.stream,n.Na={}):(n.mode&61440)===32768?(n.La=P.Ua.file.node,n.Ma=P.Ua.file.stream,n.Ra=0,n.Na=null):(n.mode&61440)===40960?(n.La=P.Ua.link.node,n.Ma=P.Ua.link.stream):(n.mode&61440)===8192&&(n.La=P.Ua.vb.node,n.Ma=P.Ua.vb.stream),n.timestamp=Date.now(),t&&(t.Na[e]=n,t.timestamp=n.timestamp),n},Rb:function(t){return t.Na?t.Na.subarray?t.Na.subarray(0,t.Ra):new Uint8Array(t.Na):new Uint8Array(0)},wb:function(t,e){var n=t.Na?t.Na.length:0;n>=e||(e=Math.max(e,n*(1048576>n?2:1.125)>>>0),n!=0&&(e=Math.max(e,256)),n=t.Na,t.Na=new Uint8Array(e),0<t.Ra&&t.Na.set(n.subarray(0,t.Ra),0))},Nb:function(t,e){if(t.Ra!=e)if(e==0)t.Na=null,t.Ra=0;else{var n=t.Na;t.Na=new Uint8Array(e),n&&t.Na.set(n.subarray(0,Math.min(e,t.Ra))),t.Ra=e}},La:{Ta:function(t){var e={};return e.dev=(t.mode&61440)===8192?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,Dt(t.mode)?e.size=4096:(t.mode&61440)===32768?e.size=t.Ra:(t.mode&61440)===40960?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.Fb=4096,e.blocks=Math.ceil(e.size/e.Fb),e},Sa:function(t,e){e.mode!==void 0&&(t.mode=e.mode),e.timestamp!==void 0&&(t.timestamp=e.timestamp),e.size!==void 0&&P.Nb(t,e.size)},lookup:function(){throw Ue[44]},fb:function(t,e,n,r){return P.createNode(t,e,n,r)},rename:function(t,e,n){if(Dt(t.mode)){try{var r=Jt(e,n)}catch(u){}if(r)for(var o in r.Na)throw new c(55)}delete t.parent.Na[t.name],t.parent.timestamp=Date.now(),t.name=n,e.Na[n]=t,e.timestamp=t.parent.timestamp,t.parent=e},unlink:function(t,e){delete t.Na[e],t.timestamp=Date.now()},rmdir:function(t,e){var n=Jt(t,e),r;for(r in n.Na)throw new c(55);delete t.Na[e],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."],n;for(n in t.Na)t.Na.hasOwnProperty(n)&&e.push(n);return e},symlink:function(t,e,n){return t=P.createNode(t,e,41471,0),t.link=n,t},readlink:function(t){if((t.mode&61440)!==40960)throw new c(28);return t.link}},Ma:{read:function(t,e,n,r,o){var u=t.node.Na;if(o>=t.node.Ra)return 0;if(t=Math.min(t.node.Ra-o,r),8<t&&u.subarray)e.set(u.subarray(o,o+t),n);else for(r=0;r<t;r++)e[n+r]=u[o+r];return t},write:function(t,e,n,r,o,u){if(e.buffer===k.buffer&&(u=!1),!r)return 0;if(t=t.node,t.timestamp=Date.now(),e.subarray&&(!t.Na||t.Na.subarray)){if(u)return t.Na=e.subarray(n,n+r),t.Ra=r;if(t.Ra===0&&o===0)return t.Na=e.slice(n,n+r),t.Ra=r;if(o+r<=t.Ra)return t.Na.set(e.subarray(n,n+r),o),r}if(P.wb(t,o+r),t.Na.subarray&&e.subarray)t.Na.set(e.subarray(n,n+r),o);else for(u=0;u<r;u++)t.Na[o+u]=e[n+u];return t.Ra=Math.max(t.Ra,o+r),r},Ya:function(t,e,n){if(n===1?e+=t.position:n===2&&(t.node.mode&61440)===32768&&(e+=t.node.Ra),0>e)throw new c(28);return e},rb:function(t,e,n){P.wb(t.node,e+n),t.node.Ra=Math.max(t.node.Ra,e+n)},gb:function(t,e,n,r,o,u){if(e!==0)throw new c(28);if((t.node.mode&61440)!==32768)throw new c(43);if(t=t.node.Na,u&2||t.buffer!==_t){if((0<r||r+n<t.length)&&(t.subarray?t=t.subarray(r,r+n):t=Array.prototype.slice.call(t,r,r+n)),r=!0,n=on(n),!n)throw new c(48);k.set(t,n)}else r=!1,n=t.byteOffset;return{Mb:n,jb:r}},hb:function(t,e,n,r,o){if((t.node.mode&61440)!==32768)throw new c(43);return o&2||P.Ma.write(t,e,0,r,n,!1),0}}},Ne=null,an={},$t=[],Gn=1,Kt=null,sn=!0,Ct={},c=null,Ue={};function Tt(t,e){if(t=he("/",t),e=e||{},!t)return{path:"",node:null};var n={xb:!0,qb:0},r;for(r in n)e[r]===void 0&&(e[r]=n[r]);if(8<e.qb)throw new c(32);t=Ie(t.split("/").filter(function(b){return!!b}),!1);var o=Ne;for(n="/",r=0;r<t.length;r++){var u=r===t.length-1;if(u&&e.parent)break;if(o=Jt(o,t[r]),n=Vt(n+"/"+t[r]),o.$a&&(!u||u&&e.xb)&&(o=o.$a.root),!u||e.Xa){for(u=0;(o.mode&61440)===40960;)if(o=mn(n),n=he(Kn(n),o),o=Tt(n,{qb:e.qb}).node,40<u++)throw new c(32)}}return{path:n,node:o}}function pe(t){for(var e;;){if(t===t.parent)return t=t.Va.Ab,e?t[t.length-1]!=="/"?t+"/"+e:t+e:t;e=e?t.name+"/"+e:t.name,t=t.parent}}function Be(t,e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r)|0;return(t+n>>>0)%Kt.length}function un(t){var e=Be(t.parent.id,t.name);if(Kt[e]===t)Kt[e]=t.ab;else for(e=Kt[e];e;){if(e.ab===t){e.ab=t.ab;break}e=e.ab}}function Jt(t,e){var n;if(n=(n=ne(t,"x"))?n:t.La.lookup?0:2)throw new c(n,t);for(n=Kt[Be(t.id,e)];n;n=n.ab){var r=n.name;if(n.parent.id===t.id&&r===e)return n}return t.La.lookup(t,e)}function ln(t,e,n,r){return t=new xn(t,e,n,r),e=Be(t.parent.id,t.name),t.ab=Kt[e],Kt[e]=t}function Dt(t){return(t&61440)===16384}var tr={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090};function fn(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e}function ne(t,e){if(sn)return 0;if(!e.includes("r")||t.mode&292){if(e.includes("w")&&!(t.mode&146)||e.includes("x")&&!(t.mode&73))return 2}else return 2;return 0}function cn(t,e){try{return Jt(t,e),20}catch(n){}return ne(t,"wx")}function dn(t,e,n){try{var r=Jt(t,e)}catch(o){return o.Pa}if(t=ne(t,"wx"))return t;if(n){if(!Dt(r.mode))return 54;if(r===r.parent||pe(r)==="/")return 10}else if(Dt(r.mode))return 31;return 0}function er(t){var e=4096;for(t=t||0;t<=e;t++)if(!$t[t])return t;throw new c(33)}function nr(t,e){we||(we=function(){},we.prototype={});var n=new we,r;for(r in t)n[r]=t[r];return t=n,e=er(e),t.fd=e,$t[e]=t}var rr={open:function(t){t.Ma=an[t.node.rdev].Ma,t.Ma.open&&t.Ma.open(t)},Ya:function(){throw new c(70)}};function ze(t,e){an[t]={Ma:e}}function hn(t,e){var n=e==="/",r=!e;if(n&&Ne)throw new c(10);if(!n&&!r){var o=Tt(e,{xb:!1});if(e=o.path,o=o.node,o.$a)throw new c(10);if(!Dt(o.mode))throw new c(54)}e={type:t,Sb:{},Ab:e,Kb:[]},t=t.Va(e),t.Va=e,e.root=t,n?Ne=t:o&&(o.$a=e,o.Va&&o.Va.Kb.push(e))}function me(t,e,n){var r=Tt(t,{parent:!0}).node;if(t=de(t),!t||t==="."||t==="..")throw new c(28);var o=cn(r,t);if(o)throw new c(o);if(!r.La.fb)throw new c(63);return r.La.fb(r,t,e,n)}function Qt(t,e){return me(t,(e!==void 0?e:511)&1023|16384,0)}function ye(t,e,n){typeof n=="undefined"&&(n=e,e=438),me(t,e|8192,n)}function je(t,e){if(!he(t))throw new c(44);var n=Tt(e,{parent:!0}).node;if(!n)throw new c(44);e=de(e);var r=cn(n,e);if(r)throw new c(r);if(!n.La.symlink)throw new c(63);n.La.symlink(n,e,t)}function pn(t){var e=Tt(t,{parent:!0}).node,n=de(t),r=Jt(e,n),o=dn(e,n,!1);if(o)throw new c(o);if(!e.La.unlink)throw new c(63);if(r.$a)throw new c(10);try{Ct.willDeletePath&&Ct.willDeletePath(t)}catch(u){tt("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+u.message)}e.La.unlink(e,n),un(r);try{Ct.onDeletePath&&Ct.onDeletePath(t)}catch(u){tt("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+u.message)}}function mn(t){if(t=Tt(t).node,!t)throw new c(44);if(!t.La.readlink)throw new c(28);return he(pe(t.parent),t.La.readlink(t))}function ge(t,e){if(t=Tt(t,{Xa:!e}).node,!t)throw new c(44);if(!t.La.Ta)throw new c(63);return t.La.Ta(t)}function ir(t){return ge(t,!0)}function be(t,e){if(t=typeof t=="string"?Tt(t,{Xa:!0}).node:t,!t.La.Sa)throw new c(63);t.La.Sa(t,{mode:e&4095|t.mode&-4096,timestamp:Date.now()})}function yn(t){if(t=typeof t=="string"?Tt(t,{Xa:!0}).node:t,!t.La.Sa)throw new c(63);t.La.Sa(t,{timestamp:Date.now()})}function gn(t,e){if(0>e)throw new c(28);if(t=typeof t=="string"?Tt(t,{Xa:!0}).node:t,!t.La.Sa)throw new c(63);if(Dt(t.mode))throw new c(31);if((t.mode&61440)!==32768)throw new c(28);var n=ne(t,"w");if(n)throw new c(n);t.La.Sa(t,{size:e,timestamp:Date.now()})}function Zt(t,e,n,r){if(t==="")throw new c(44);if(typeof e=="string"){var o=tr[e];if(typeof o=="undefined")throw Error("Unknown file open mode: "+e);e=o}if(n=e&64?(typeof n=="undefined"?438:n)&4095|32768:0,typeof t=="object")var u=t;else{t=Vt(t);try{u=Tt(t,{Xa:!(e&131072)}).node}catch(b){}}if(o=!1,e&64)if(u){if(e&128)throw new c(20)}else u=me(t,n,0),o=!0;if(!u)throw new c(44);if((u.mode&61440)===8192&&(e&=-513),e&65536&&!Dt(u.mode))throw new c(54);if(!o&&(n=u?(u.mode&61440)===40960?32:Dt(u.mode)&&(fn(e)!=="r"||e&512)?31:ne(u,fn(e)):44))throw new c(n);e&512&&gn(u,0),e&=-131713,r=nr({node:u,path:pe(u),flags:e,seekable:!0,position:0,Ma:u.Ma,Pb:[],error:!1},r),r.Ma.open&&r.Ma.open(r),!i.logReadFiles||e&1||(_e||(_e={}),t in _e||(_e[t]=1,tt("FS.trackingDelegate error on read file: "+t)));try{Ct.onOpenFile&&(u=0,(e&2097155)!==1&&(u|=1),e&2097155&&(u|=2),Ct.onOpenFile(t,u))}catch(b){tt("FS.trackingDelegate['onOpenFile']('"+t+"', flags) threw an exception: "+b.message)}return r}function We(t){if(t.fd===null)throw new c(8);t.nb&&(t.nb=null);try{t.Ma.close&&t.Ma.close(t)}catch(e){throw e}finally{$t[t.fd]=null}t.fd=null}function bn(t,e,n){if(t.fd===null)throw new c(8);if(!t.seekable||!t.Ma.Ya)throw new c(70);if(n!=0&&n!=1&&n!=2)throw new c(28);t.position=t.Ma.Ya(t,e,n),t.Pb=[]}function wn(t,e,n,r,o){if(0>r||0>o)throw new c(28);if(t.fd===null)throw new c(8);if((t.flags&2097155)===1)throw new c(8);if(Dt(t.node.mode))throw new c(31);if(!t.Ma.read)throw new c(28);var u=typeof o!="undefined";if(!u)o=t.position;else if(!t.seekable)throw new c(70);return e=t.Ma.read(t,e,n,r,o),u||(t.position+=e),e}function _n(t,e,n,r,o,u){if(0>r||0>o)throw new c(28);if(t.fd===null)throw new c(8);if(!(t.flags&2097155))throw new c(8);if(Dt(t.node.mode))throw new c(31);if(!t.Ma.write)throw new c(28);t.seekable&&t.flags&1024&&bn(t,0,2);var b=typeof o!="undefined";if(!b)o=t.position;else if(!t.seekable)throw new c(70);e=t.Ma.write(t,e,n,r,o,u),b||(t.position+=e);try{t.path&&Ct.onWriteToFile&&Ct.onWriteToFile(t.path)}catch(N){tt("FS.trackingDelegate['onWriteToFile']('"+t.path+"') threw an exception: "+N.message)}return e}function or(t){var e={encoding:"binary"};if(e=e||{},e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw Error('Invalid encoding type "'+e.encoding+'"');var n,r=Zt(t,e.flags);t=ge(t).size;var o=new Uint8Array(t);return wn(r,o,0,t,0),e.encoding==="utf8"?n=T(o,0):e.encoding==="binary"&&(n=o),We(r),n}function vn(){c||(c=function(t,e){this.node=e,this.Ob=function(n){this.Pa=n},this.Ob(t),this.message="FS error"},c.prototype=Error(),c.prototype.constructor=c,[44].forEach(function(t){Ue[t]=new c(t),Ue[t].stack="<generic error, no stack>"}))}var kn;function En(t,e){var n=0;return t&&(n|=365),e&&(n|=146),n}function ue(t,e,n){t=Vt("/dev/"+t);var r=En(!!e,!!n);$e||($e=64);var o=$e++<<8|0;ze(o,{open:function(u){u.seekable=!1},close:function(){n&&n.buffer&&n.buffer.length&&n(10)},read:function(u,b,N,nt){for(var z=0,At=0;At<nt;At++){try{var Lt=e()}catch(Gt){throw new c(29)}if(Lt===void 0&&z===0)throw new c(6);if(Lt==null)break;z++,b[N+At]=Lt}return z&&(u.node.timestamp=Date.now()),z},write:function(u,b,N,nt){for(var z=0;z<nt;z++)try{n(b[N+z])}catch(At){throw new c(29)}return nt&&(u.node.timestamp=Date.now()),z}}),ye(t,r,o)}var $e,at={},we,_e,Qe={};function He(t,e,n){try{var r=t(e)}catch(o){if(o&&o.node&&Vt(e)!==Vt(pe(o.node)))return-54;throw o}return d[n>>2]=r.dev,d[n+4>>2]=0,d[n+8>>2]=r.ino,d[n+12>>2]=r.mode,d[n+16>>2]=r.nlink,d[n+20>>2]=r.uid,d[n+24>>2]=r.gid,d[n+28>>2]=r.rdev,d[n+32>>2]=0,Rt=[r.size>>>0,(V=r.size,1<=+Math.abs(V)?0<V?(Math.min(+Math.floor(V/4294967296),4294967295)|0)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],d[n+40>>2]=Rt[0],d[n+44>>2]=Rt[1],d[n+48>>2]=4096,d[n+52>>2]=r.blocks,d[n+56>>2]=r.atime.getTime()/1e3|0,d[n+60>>2]=0,d[n+64>>2]=r.mtime.getTime()/1e3|0,d[n+68>>2]=0,d[n+72>>2]=r.ctime.getTime()/1e3|0,d[n+76>>2]=0,Rt=[r.ino>>>0,(V=r.ino,1<=+Math.abs(V)?0<V?(Math.min(+Math.floor(V/4294967296),4294967295)|0)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],d[n+80>>2]=Rt[0],d[n+84>>2]=Rt[1],0}var ve=void 0;function ke(){return ve+=4,d[ve-4>>2]}function Yt(t){if(t=$t[t],!t)throw new c(8);return t}var Ve;Ve=it?function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:function(){return performance.now()};var Ke={};function Sn(){if(!Ye){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:j||"./this.program"},e;for(e in Ke)Ke[e]===void 0?delete t[e]:t[e]=Ke[e];var n=[];for(e in t)n.push(e+"="+t[e]);Ye=n}return Ye}var Ye;function xn(t,e,n,r){t||(t=this),this.parent=t,this.Va=t.Va,this.$a=null,this.id=Gn++,this.name=e,this.mode=n,this.La={},this.Ma={},this.rdev=r}Object.defineProperties(xn.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(t){t?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(t){t?this.mode|=146:this.mode&=-147}}}),vn(),Kt=Array(4096),hn(P,"/"),Qt("/tmp"),Qt("/home"),Qt("/home/web_user"),function(){Qt("/dev"),ze(259,{read:function(){return 0},write:function(e,n,r,o){return o}}),ye("/dev/null",259),rn(1280,Jn),rn(1536,Zn),ye("/dev/tty",1280),ye("/dev/tty1",1536);var t=Yn();ue("random",t),ue("urandom",t),Qt("/dev/shm"),Qt("/dev/shm/tmp")}(),function(){Qt("/proc");var t=Qt("/proc/self");Qt("/proc/self/fd"),hn({Va:function(){var e=ln(t,"fd",16895,73);return e.La={lookup:function(n,r){var o=$t[+r];if(!o)throw new c(8);return n={parent:null,Va:{Ab:"fake"},La:{readlink:function(){return o.path}}},n.parent=n}},e}},"/proc/self/fd")}();function Rn(t,e){var n=Array(Y(t)+1);return t=K(t,n,0,n.length),e&&(n.length=t),n}var ar={a:function(t,e,n,r){L("Assertion failed: "+y(t)+", at: "+[e?y(e):"unknown filename",n,r?y(r):"unknown function"])},s:function(t,e){se||(se=!0,Xt()),t=new Date(1e3*d[t>>2]),d[e>>2]=t.getSeconds(),d[e+4>>2]=t.getMinutes(),d[e+8>>2]=t.getHours(),d[e+12>>2]=t.getDate(),d[e+16>>2]=t.getMonth(),d[e+20>>2]=t.getFullYear()-1900,d[e+24>>2]=t.getDay();var n=new Date(t.getFullYear(),0,1);d[e+28>>2]=(t.getTime()-n.getTime())/864e5|0,d[e+36>>2]=-(60*t.getTimezoneOffset());var r=new Date(t.getFullYear(),6,1).getTimezoneOffset();return n=n.getTimezoneOffset(),t=(r!=n&&t.getTimezoneOffset()==Math.min(n,r))|0,d[e+32>>2]=t,t=d[re()+(t?4:0)>>2],d[e+40>>2]=t,e},y:function(t,e){try{if(t=y(t),e&-8)var n=-28;else{var r;(r=Tt(t,{Xa:!0}).node)?(t="",e&4&&(t+="r"),e&2&&(t+="w"),e&1&&(t+="x"),n=t&&ne(r,t)?-2:0):n=-44}return n}catch(o){return typeof at!="undefined"&&o instanceof c||L(o),-o.Pa}},i:function(t,e){try{return t=y(t),be(t,e),0}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),-n.Pa}},z:function(t){try{return t=y(t),yn(t),0}catch(e){return typeof at!="undefined"&&e instanceof c||L(e),-e.Pa}},j:function(t,e){try{var n=$t[t];if(!n)throw new c(8);return be(n.node,e),0}catch(r){return typeof at!="undefined"&&r instanceof c||L(r),-r.Pa}},A:function(t){try{var e=$t[t];if(!e)throw new c(8);return yn(e.node),0}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),-n.Pa}},b:function(t,e,n){ve=n;try{var r=Yt(t);switch(e){case 0:var o=ke();return 0>o?-28:Zt(r.path,r.flags,0,o).fd;case 1:case 2:return 0;case 3:return r.flags;case 4:return o=ke(),r.flags|=o,0;case 12:return o=ke(),X[o+0>>1]=2,0;case 13:case 14:return 0;case 16:case 8:return-28;case 9:return d[Xe()>>2]=28,-1;default:return-28}}catch(u){return typeof at!="undefined"&&u instanceof c||L(u),-u.Pa}},k:function(t,e){try{var n=Yt(t);return He(ge,n.path,e)}catch(r){return typeof at!="undefined"&&r instanceof c||L(r),-r.Pa}},E:function(t,e,n){try{var r=$t[t];if(!r)throw new c(8);if(!(r.flags&2097155))throw new c(28);return gn(r.node,n),0}catch(o){return typeof at!="undefined"&&o instanceof c||L(o),-o.Pa}},D:function(t,e){try{return e===0?-28:e<Y("/")+1?-68:(K("/",A,t,e),t)}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),-n.Pa}},v:function(){return 0},d:function(){return 42},h:function(t,e){try{return t=y(t),He(ir,t,e)}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),-n.Pa}},l:function(t,e){try{return t=y(t),t=Vt(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),Qt(t,e),0}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),-n.Pa}},t:function(t,e,n,r,o,u){try{t:{u<<=12;var b=!1;if(r&16&&t%65536!==0)var N=-28;else{if(r&32){var nt=on(e);if(!nt){N=-48;break t}b=!0}else{var z=$t[o];if(!z){N=-8;break t}var At=u;if(n&2&&!(r&2)&&(z.flags&2097155)!==2)throw new c(2);if((z.flags&2097155)===1)throw new c(2);if(!z.Ma.gb)throw new c(43);var Lt=z.Ma.gb(z,t,e,At,n,r);nt=Lt.Mb,b=Lt.jb}Qe[nt]={Jb:nt,Ib:e,jb:b,fd:o,Lb:n,flags:r,offset:u},N=nt}}return N}catch(Gt){return typeof at!="undefined"&&Gt instanceof c||L(Gt),-Gt.Pa}},u:function(t,e){try{var n=Qe[t];if(e!==0&&n){if(e===n.Ib){var r=$t[n.fd];if(r&&n.Lb&2){var o=n.flags,u=n.offset,b=A.slice(t,t+e);r&&r.Ma.hb&&r.Ma.hb(r,b,u,e,o)}Qe[t]=null,n.jb&&le(n.Jb)}var N=0}else N=-28;return N}catch(nt){return typeof at!="undefined"&&nt instanceof c||L(nt),-nt.Pa}},I:function(t,e,n){ve=n;try{var r=y(t),o=n?ke():0;return Zt(r,e,o).fd}catch(u){return typeof at!="undefined"&&u instanceof c||L(u),-u.Pa}},F:function(t,e,n){try{if(t=y(t),0>=n)var r=-28;else{var o=mn(t),u=Math.min(n,Y(o)),b=k[e+u];K(o,A,e,n+1),k[e+u]=b,r=u}return r}catch(N){return typeof at!="undefined"&&N instanceof c||L(N),-N.Pa}},H:function(t){try{t=y(t);var e=Tt(t,{parent:!0}).node,n=de(t),r=Jt(e,n),o=dn(e,n,!0);if(o)throw new c(o);if(!e.La.rmdir)throw new c(63);if(r.$a)throw new c(10);try{Ct.willDeletePath&&Ct.willDeletePath(t)}catch(u){tt("FS.trackingDelegate['willDeletePath']('"+t+"') threw an exception: "+u.message)}e.La.rmdir(e,n),un(r);try{Ct.onDeletePath&&Ct.onDeletePath(t)}catch(u){tt("FS.trackingDelegate['onDeletePath']('"+t+"') threw an exception: "+u.message)}return 0}catch(u){return typeof at!="undefined"&&u instanceof c||L(u),-u.Pa}},e:function(t,e){try{return t=y(t),He(ge,t,e)}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),-n.Pa}},x:function(t){try{return t=y(t),pn(t),0}catch(e){return typeof at!="undefined"&&e instanceof c||L(e),-e.Pa}},J:function(){return 2147483648},n:function(t,e,n){A.copyWithin(t,e,e+n)},c:function(t){var e=A.length;if(t>>>=0,2147483648<t)return!1;for(var n=1;4>=n;n*=2){var r=e*(1+.2/n);r=Math.min(r,t+100663296),r=Math.max(t,r),0<r%65536&&(r+=65536-r%65536);t:{try{rt.grow(Math.min(2147483648,r)-_t.byteLength+65535>>>16),J();var o=1;break t}catch(u){}o=void 0}if(o)return!0}return!1},r:function(t){for(var e=Ve();Ve()-e<t;);},p:function(t,e){var n=0;return Sn().forEach(function(r,o){var u=e+n;for(o=d[t+4*o>>2]=u,u=0;u<r.length;++u)k[o++>>0]=r.charCodeAt(u);k[o>>0]=0,n+=r.length+1}),0},q:function(t,e){var n=Sn();d[t>>2]=n.length;var r=0;return n.forEach(function(o){r+=o.length+1}),d[e>>2]=r,0},f:function(t){try{var e=Yt(t);return We(e),0}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),n.Pa}},o:function(t,e){try{var n=Yt(t);return k[e>>0]=n.tty?2:Dt(n.mode)?3:(n.mode&61440)===40960?7:4,0}catch(r){return typeof at!="undefined"&&r instanceof c||L(r),r.Pa}},w:function(t,e,n,r){try{t:{for(var o=Yt(t),u=t=0;u<n;u++){var b=d[e+(8*u+4)>>2],N=wn(o,k,d[e+8*u>>2],b,void 0);if(0>N){var nt=-1;break t}if(t+=N,N<b)break}nt=t}return d[r>>2]=nt,0}catch(z){return typeof at!="undefined"&&z instanceof c||L(z),z.Pa}},m:function(t,e,n,r,o){try{var u=Yt(t);return t=4294967296*n+(e>>>0),-9007199254740992>=t||9007199254740992<=t?-61:(bn(u,t,r),Rt=[u.position>>>0,(V=u.position,1<=+Math.abs(V)?0<V?(Math.min(+Math.floor(V/4294967296),4294967295)|0)>>>0:~~+Math.ceil((V-+(~~V>>>0))/4294967296)>>>0:0)],d[o>>2]=Rt[0],d[o+4>>2]=Rt[1],u.nb&&t===0&&r===0&&(u.nb=null),0)}catch(b){return typeof at!="undefined"&&b instanceof c||L(b),b.Pa}},G:function(t){try{var e=Yt(t);return e.Ma&&e.Ma.fsync?-e.Ma.fsync(e):0}catch(n){return typeof at!="undefined"&&n instanceof c||L(n),n.Pa}},B:function(t,e,n,r){try{t:{for(var o=Yt(t),u=t=0;u<n;u++){var b=_n(o,k,d[e+8*u>>2],d[e+(8*u+4)>>2],void 0);if(0>b){var N=-1;break t}t+=b}N=t}return d[r>>2]=N,0}catch(nt){return typeof at!="undefined"&&nt instanceof c||L(nt),nt.Pa}},g:function(t){var e=Date.now();return d[t>>2]=e/1e3|0,d[t+4>>2]=e%1e3*1e3|0,0},K:function(t){var e=Date.now()/1e3|0;return t&&(d[t>>2]=e),e},C:function(t,e){if(e){var n=e+8;e=1e3*d[n>>2],e+=d[n+4>>2]/1e3}else e=Date.now();t=y(t);try{var r=Tt(t,{Xa:!0}).node;r.La.Sa(r,{timestamp:Math.max(e,e)});var o=0}catch(u){if(!(u instanceof c)){t:{if(o=Error(),!o.stack){try{throw Error()}catch(b){o=b}if(!o.stack){o="(no stack trace available)";break t}}o=o.stack.toString()}throw i.extraStackTrace&&(o+=`
`+i.extraStackTrace()),o=Pt(o),u+" : "+o}o=u.Pa,d[Xe()>>2]=o,o=-1}return o}};(function(){function t(o){i.asm=o.exports,rt=i.asm.L,J(),D=i.asm.Ca,ht.unshift(i.asm.M),Z--,i.monitorRunDependencies&&i.monitorRunDependencies(Z),Z==0&&(jt!==null&&(clearInterval(jt),jt=null),vt&&(o=vt,vt=null,o()))}function e(o){t(o.instance)}function n(o){return Nt().then(function(u){return WebAssembly.instantiate(u,r)}).then(function(u){return u}).then(o,function(u){tt("failed to asynchronously prepare wasm: "+u),L(u)})}var r={a:ar};if(Z++,i.monitorRunDependencies&&i.monitorRunDependencies(Z),i.instantiateWasm)try{return i.instantiateWasm(r,t)}catch(o){return tt("Module.instantiateWasm callback failed with error: "+o),!1}return function(){return f||typeof WebAssembly.instantiateStreaming!="function"||pt()||st.startsWith("file://")||typeof fetch!="function"?n(e):fetch(st,{credentials:"same-origin"}).then(function(o){return WebAssembly.instantiateStreaming(o,r).then(e,function(u){return tt("wasm streaming compile failed: "+u),tt("falling back to ArrayBuffer instantiation"),n(e)})})}(),{}})(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.M).apply(null,arguments)},i._sqlite3_free=function(){return(i._sqlite3_free=i.asm.N).apply(null,arguments)};var Xe=i.___errno_location=function(){return(Xe=i.___errno_location=i.asm.O).apply(null,arguments)};i._sqlite3_step=function(){return(i._sqlite3_step=i.asm.P).apply(null,arguments)},i._sqlite3_finalize=function(){return(i._sqlite3_finalize=i.asm.Q).apply(null,arguments)},i._sqlite3_prepare_v2=function(){return(i._sqlite3_prepare_v2=i.asm.R).apply(null,arguments)},i._sqlite3_reset=function(){return(i._sqlite3_reset=i.asm.S).apply(null,arguments)},i._sqlite3_clear_bindings=function(){return(i._sqlite3_clear_bindings=i.asm.T).apply(null,arguments)},i._sqlite3_value_blob=function(){return(i._sqlite3_value_blob=i.asm.U).apply(null,arguments)},i._sqlite3_value_text=function(){return(i._sqlite3_value_text=i.asm.V).apply(null,arguments)},i._sqlite3_value_bytes=function(){return(i._sqlite3_value_bytes=i.asm.W).apply(null,arguments)},i._sqlite3_value_double=function(){return(i._sqlite3_value_double=i.asm.X).apply(null,arguments)},i._sqlite3_value_int=function(){return(i._sqlite3_value_int=i.asm.Y).apply(null,arguments)},i._sqlite3_value_type=function(){return(i._sqlite3_value_type=i.asm.Z).apply(null,arguments)},i._sqlite3_result_blob=function(){return(i._sqlite3_result_blob=i.asm._).apply(null,arguments)},i._sqlite3_result_double=function(){return(i._sqlite3_result_double=i.asm.$).apply(null,arguments)},i._sqlite3_result_error=function(){return(i._sqlite3_result_error=i.asm.aa).apply(null,arguments)},i._sqlite3_result_int=function(){return(i._sqlite3_result_int=i.asm.ba).apply(null,arguments)},i._sqlite3_result_int64=function(){return(i._sqlite3_result_int64=i.asm.ca).apply(null,arguments)},i._sqlite3_result_null=function(){return(i._sqlite3_result_null=i.asm.da).apply(null,arguments)},i._sqlite3_result_text=function(){return(i._sqlite3_result_text=i.asm.ea).apply(null,arguments)},i._sqlite3_column_count=function(){return(i._sqlite3_column_count=i.asm.fa).apply(null,arguments)},i._sqlite3_data_count=function(){return(i._sqlite3_data_count=i.asm.ga).apply(null,arguments)},i._sqlite3_column_blob=function(){return(i._sqlite3_column_blob=i.asm.ha).apply(null,arguments)},i._sqlite3_column_bytes=function(){return(i._sqlite3_column_bytes=i.asm.ia).apply(null,arguments)},i._sqlite3_column_double=function(){return(i._sqlite3_column_double=i.asm.ja).apply(null,arguments)},i._sqlite3_column_text=function(){return(i._sqlite3_column_text=i.asm.ka).apply(null,arguments)},i._sqlite3_column_type=function(){return(i._sqlite3_column_type=i.asm.la).apply(null,arguments)},i._sqlite3_column_name=function(){return(i._sqlite3_column_name=i.asm.ma).apply(null,arguments)},i._sqlite3_bind_blob=function(){return(i._sqlite3_bind_blob=i.asm.na).apply(null,arguments)},i._sqlite3_bind_double=function(){return(i._sqlite3_bind_double=i.asm.oa).apply(null,arguments)},i._sqlite3_bind_int=function(){return(i._sqlite3_bind_int=i.asm.pa).apply(null,arguments)},i._sqlite3_bind_text=function(){return(i._sqlite3_bind_text=i.asm.qa).apply(null,arguments)},i._sqlite3_bind_parameter_index=function(){return(i._sqlite3_bind_parameter_index=i.asm.ra).apply(null,arguments)},i._sqlite3_sql=function(){return(i._sqlite3_sql=i.asm.sa).apply(null,arguments)},i._sqlite3_normalized_sql=function(){return(i._sqlite3_normalized_sql=i.asm.ta).apply(null,arguments)},i._sqlite3_errmsg=function(){return(i._sqlite3_errmsg=i.asm.ua).apply(null,arguments)},i._sqlite3_exec=function(){return(i._sqlite3_exec=i.asm.va).apply(null,arguments)},i._sqlite3_changes=function(){return(i._sqlite3_changes=i.asm.wa).apply(null,arguments)},i._sqlite3_close_v2=function(){return(i._sqlite3_close_v2=i.asm.xa).apply(null,arguments)},i._sqlite3_create_function_v2=function(){return(i._sqlite3_create_function_v2=i.asm.ya).apply(null,arguments)},i._sqlite3_open=function(){return(i._sqlite3_open=i.asm.za).apply(null,arguments)};var Ee=i._malloc=function(){return(Ee=i._malloc=i.asm.Aa).apply(null,arguments)},le=i._free=function(){return(le=i._free=i.asm.Ba).apply(null,arguments)};i._RegisterExtensionFunctions=function(){return(i._RegisterExtensionFunctions=i.asm.Da).apply(null,arguments)};var re=i.__get_tzname=function(){return(re=i.__get_tzname=i.asm.Ea).apply(null,arguments)},An=i.__get_daylight=function(){return(An=i.__get_daylight=i.asm.Fa).apply(null,arguments)},qn=i.__get_timezone=function(){return(qn=i.__get_timezone=i.asm.Ga).apply(null,arguments)},fe=i.stackSave=function(){return(fe=i.stackSave=i.asm.Ha).apply(null,arguments)},ce=i.stackRestore=function(){return(ce=i.stackRestore=i.asm.Ia).apply(null,arguments)},Ht=i.stackAlloc=function(){return(Ht=i.stackAlloc=i.asm.Ja).apply(null,arguments)},Mn=i._memalign=function(){return(Mn=i._memalign=i.asm.Ka).apply(null,arguments)};i.cwrap=function(t,e,n,r){n=n||[];var o=n.every(function(u){return u==="number"});return e!=="string"&&o&&!r?xt(t):function(){return F(t,e,n,arguments)}},i.UTF8ToString=y,i.stackSave=fe,i.stackRestore=ce,i.stackAlloc=Ht;var Se;vt=function t(){Se||Je(),Se||(vt=t)};function Je(){function t(){if(!Se&&(Se=!0,i.calledRun=!0,!St)){if(i.noFSInit||kn||(kn=!0,vn(),i.stdin=i.stdin,i.stdout=i.stdout,i.stderr=i.stderr,i.stdin?ue("stdin",i.stdin):je("/dev/tty","/dev/stdin"),i.stdout?ue("stdout",null,i.stdout):je("/dev/tty","/dev/stdout"),i.stderr?ue("stderr",null,i.stderr):je("/dev/tty1","/dev/stderr"),Zt("/dev/stdin",0),Zt("/dev/stdout",1),Zt("/dev/stderr",1)),sn=!1,Wt(ht),i.onRuntimeInitialized&&i.onRuntimeInitialized(),i.postRun)for(typeof i.postRun=="function"&&(i.postRun=[i.postRun]);i.postRun.length;){var e=i.postRun.shift();$.unshift(e)}Wt($)}}if(!(0<Z)){if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)et();Wt(C),0<Z||(i.setStatus?(i.setStatus("Running..."),setTimeout(function(){setTimeout(function(){i.setStatus("")},1),t()},1)):t())}}if(i.run=Je,i.preInit)for(typeof i.preInit=="function"&&(i.preInit=[i.preInit]);0<i.preInit.length;)i.preInit.pop()();return Je(),_}),Me)};typeof Oe=="object"&&typeof ee=="object"?(ee.exports=Te,ee.exports.default=Te):typeof define=="function"&&define.amd?define([],function(){return Te}):typeof Oe=="object"&&(Oe.Module=Te)});var Un=Ln((Ze,Ge)=>{((R,v)=>{typeof define=="function"&&define.amd?define([],v):typeof Ge=="object"&&typeof Ze!="undefined"?Ge.exports=v():R.Papa=v()})(Ze,function R(){var v=typeof self!="undefined"?self:typeof window!="undefined"?window:v!==void 0?v:{},m,_=!v.document&&!!v.postMessage,E=v.IS_PAPA_WORKER||!1,i={},U=0,h={};function j(a){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(s){var f=tt(s);f.chunkSize=parseInt(f.chunkSize),s.step||s.chunk||(f.chunkSize=null),this._handle=new mt(f),(this._handle.streamer=this)._config=f}.call(this,a),this.parseChunk=function(s,f){var w=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<w){let S=this._config.newline;S||(g=this._config.quoteChar||'"',S=this._handle.guessLineEndings(s,g)),s=[...s.split(S).slice(w)].join(S)}this.isFirstChunk&&I(this._config.beforeFirstChunk)&&(g=this._config.beforeFirstChunk(s))!==void 0&&(s=g),this.isFirstChunk=!1,this._halted=!1;var w=this._partialLine+s,g=(this._partialLine="",this._handle.parse(w,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=g.meta.cursor,w=(this._finished||(this._partialLine=w.substring(s-this._baseIndex),this._baseIndex=s),g&&g.data&&(this._rowCount+=g.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),E)v.postMessage({results:g,workerId:h.WORKER_ID,finished:w});else if(I(this._config.chunk)&&!f){if(this._config.chunk(g,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=g=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(g.data),this._completeResults.errors=this._completeResults.errors.concat(g.errors),this._completeResults.meta=g.meta),this._completed||!w||!I(this._config.complete)||g&&g.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),w||g&&g.meta.paused||this._nextChunk(),g}this._halted=!0},this._sendError=function(s){I(this._config.error)?this._config.error(s):E&&this._config.error&&v.postMessage({workerId:h.WORKER_ID,error:s,finished:!1})}}function Q(a){var s;(a=a||{}).chunkSize||(a.chunkSize=h.RemoteChunkSize),j.call(this,a),this._nextChunk=_?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(f){this._input=f,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),_||(s.onload=bt(this._chunkLoaded,this),s.onerror=bt(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!_),this._config.downloadRequestHeaders){var f,w=this._config.downloadRequestHeaders;for(f in w)s.setRequestHeader(f,w[f])}var g;this._config.chunkSize&&(g=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+g));try{s.send(this._config.downloadRequestBody)}catch(S){this._chunkError(S.message)}_&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(f=>(f=f.getResponseHeader("Content-Range"))!==null?parseInt(f.substring(f.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(f){f=s.statusText||f,this._sendError(new Error(f))}}function B(a){(a=a||{}).chunkSize||(a.chunkSize=h.LocalChunkSize),j.call(this,a);var s,f,w=typeof FileReader!="undefined";this.stream=function(g){this._input=g,f=g.slice||g.webkitSlice||g.mozSlice,w?((s=new FileReader).onload=bt(this._chunkLoaded,this),s.onerror=bt(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var g=this._input,S=(this._config.chunkSize&&(S=Math.min(this._start+this._config.chunkSize,this._input.size),g=f.call(g,this._start,S)),s.readAsText(g,this._config.encoding));w||this._chunkLoaded({target:{result:S}})},this._chunkLoaded=function(g){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(g.target.result)},this._chunkError=function(){this._sendError(s.error)}}function it(a){var s;j.call(this,a=a||{}),this.stream=function(f){return s=f,this._nextChunk()},this._nextChunk=function(){var f,w;if(!this._finished)return f=this._config.chunkSize,s=f?(w=s.substring(0,f),s.substring(f)):(w=s,""),this._finished=!s,this.parseChunk(w)}}function G(a){j.call(this,a=a||{});var s=[],f=!0,w=!1;this.pause=function(){j.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){j.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(g){this._input=g,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){w&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):f=!0},this._streamData=bt(function(g){try{s.push(typeof g=="string"?g:g.toString(this._config.encoding)),f&&(f=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(S){this._streamError(S)}},this),this._streamError=bt(function(g){this._streamCleanUp(),this._sendError(g)},this),this._streamEnd=bt(function(){this._streamCleanUp(),w=!0,this._streamData("")},this),this._streamCleanUp=bt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function mt(a){var s,f,w,g,S=Math.pow(2,53),rt=-S,St=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,xt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,F=this,ot=0,x=0,ct=!1,M=!1,T=[],y={data:[],errors:[],meta:{}};function K(k){return a.skipEmptyLines==="greedy"?k.join("").trim()==="":k.length===1&&k[0].length===0}function Y(){if(y&&w&&(_t("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),w=!1),a.skipEmptyLines&&(y.data=y.data.filter(function(H){return!K(H)})),dt()){let H=function(ut,J){I(a.transformHeader)&&(ut=a.transformHeader(ut,J)),T.push(ut)};var d=H;if(y)if(Array.isArray(y.data[0])){for(var k=0;dt()&&k<y.data.length;k++)y.data[k].forEach(H);y.data.splice(0,1)}else y.data.forEach(H)}function A(H,ut){for(var J=a.header?{}:[],D=0;D<H.length;D++){var C=D,ht=H[D],ht=(($,et)=>(Z=>(a.dynamicTypingFunction&&a.dynamicTyping[Z]===void 0&&(a.dynamicTyping[Z]=a.dynamicTypingFunction(Z)),(a.dynamicTyping[Z]||a.dynamicTyping)===!0))($)?et==="true"||et==="TRUE"||et!=="false"&&et!=="FALSE"&&((Z=>{if(St.test(Z)&&(Z=parseFloat(Z),rt<Z&&Z<S))return 1})(et)?parseFloat(et):xt.test(et)?new Date(et):et===""?null:et):et)(C=a.header?D>=T.length?"__parsed_extra":T[D]:C,ht=a.transform?a.transform(ht,C):ht);C==="__parsed_extra"?(J[C]=J[C]||[],J[C].push(ht)):J[C]=ht}return a.header&&(D>T.length?_t("FieldMismatch","TooManyFields","Too many fields: expected "+T.length+" fields but parsed "+D,x+ut):D<T.length&&_t("FieldMismatch","TooFewFields","Too few fields: expected "+T.length+" fields but parsed "+D,x+ut)),J}var X;y&&(a.header||a.dynamicTyping||a.transform)&&(X=1,!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(A),X=y.data.length):y.data=A(y.data,0),a.header&&y.meta&&(y.meta.fields=T),x+=X)}function dt(){return a.header&&T.length===0}function _t(k,A,X,d){k={type:k,code:A,message:X},d!==void 0&&(k.row=d),y.errors.push(k)}I(a.step)&&(g=a.step,a.step=function(k){y=k,dt()?Y():(Y(),y.data.length!==0&&(ot+=k.data.length,a.preview&&ot>a.preview?f.abort():(y.data=y.data[0],g(y,F))))}),this.parse=function(k,A,X){var d=a.quoteChar||'"',d=(a.newline||(a.newline=this.guessLineEndings(k,d)),w=!1,a.delimiter?I(a.delimiter)&&(a.delimiter=a.delimiter(k),y.meta.delimiter=a.delimiter):((d=((H,ut,J,D,C)=>{var ht,$,et,Z;C=C||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var jt=0;jt<C.length;jt++){for(var vt,L=C[jt],pt=0,st=0,ft=0,wt=(et=void 0,new yt({comments:D,delimiter:L,newline:ut,preview:10}).parse(H)),Nt=0;Nt<wt.data.length;Nt++)J&&K(wt.data[Nt])?ft++:(vt=wt.data[Nt].length,st+=vt,et===void 0?et=vt:0<vt&&(pt+=Math.abs(vt-et),et=vt));0<wt.data.length&&(st/=wt.data.length-ft),($===void 0||pt<=$)&&(Z===void 0||Z<st)&&1.99<st&&($=pt,ht=L,Z=st)}return{successful:!!(a.delimiter=ht),bestDelimiter:ht}})(k,a.newline,a.skipEmptyLines,a.comments,a.delimitersToGuess)).successful?a.delimiter=d.bestDelimiter:(w=!0,a.delimiter=h.DefaultDelimiter),y.meta.delimiter=a.delimiter),tt(a));return a.preview&&a.header&&d.preview++,s=k,f=new yt(d),y=f.parse(s,A,X),Y(),ct?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return ct},this.pause=function(){ct=!0,f.abort(),s=I(a.chunk)?"":s.substring(f.getCharIndex())},this.resume=function(){F.streamer._halted?(ct=!1,F.streamer.parseChunk(s,!0)):setTimeout(F.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,f.abort(),y.meta.aborted=!0,I(a.complete)&&a.complete(y),s=""},this.guessLineEndings=function(H,d){H=H.substring(0,1048576);var d=new RegExp(W(d)+"([^]*?)"+W(d),"gm"),X=(H=H.replace(d,"")).split("\r"),d=H.split(`
`),H=1<d.length&&d[0].length<X[0].length;if(X.length===1||H)return`
`;for(var ut=0,J=0;J<X.length;J++)X[J][0]===`
`&&ut++;return ut>=X.length/2?`\r
`:"\r"}}function W(a){return a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function yt(a){var s=(a=a||{}).delimiter,f=a.newline,w=a.comments,g=a.step,S=a.preview,rt=a.fastMode,St=null,xt=!1,F=a.quoteChar==null?'"':a.quoteChar,ot=F;if(a.escapeChar!==void 0&&(ot=a.escapeChar),(typeof s!="string"||-1<h.BAD_DELIMITERS.indexOf(s))&&(s=","),w===s)throw new Error("Comment character same as delimiter");w===!0?w="#":(typeof w!="string"||-1<h.BAD_DELIMITERS.indexOf(w))&&(w=!1),f!==`
`&&f!=="\r"&&f!==`\r
`&&(f=`
`);var x=0,ct=!1;this.parse=function(M,T,y){if(typeof M!="string")throw new Error("Input must be a string");var K=M.length,Y=s.length,dt=f.length,_t=w.length,k=I(g),A=[],X=[],d=[],H=x=0;if(!M)return pt();if(rt||rt!==!1&&M.indexOf(F)===-1){for(var ut=M.split(f),J=0;J<ut.length;J++){if(d=ut[J],x+=d.length,J!==ut.length-1)x+=f.length;else if(y)return pt();if(!w||d.substring(0,_t)!==w){if(k){if(A=[],Z(d.split(s)),st(),ct)return pt()}else Z(d.split(s));if(S&&S<=J)return A=A.slice(0,S),pt(!0)}}return pt()}for(var D=M.indexOf(s,x),C=M.indexOf(f,x),ht=new RegExp(W(ot)+W(F),"g"),$=M.indexOf(F,x);;)if(M[x]===F)for($=x,x++;;){if(($=M.indexOf(F,$+1))===-1)return y||X.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:A.length,index:x}),vt();if($===K-1)return vt(M.substring(x,$).replace(ht,F));if(F===ot&&M[$+1]===ot)$++;else if(F===ot||$===0||M[$-1]!==ot){D!==-1&&D<$+1&&(D=M.indexOf(s,$+1));var et=jt((C=C!==-1&&C<$+1?M.indexOf(f,$+1):C)===-1?D:Math.min(D,C));if(M.substr($+1+et,Y)===s){d.push(M.substring(x,$).replace(ht,F)),M[x=$+1+et+Y]!==F&&($=M.indexOf(F,x)),D=M.indexOf(s,x),C=M.indexOf(f,x);break}if(et=jt(C),M.substring($+1+et,$+1+et+dt)===f){if(d.push(M.substring(x,$).replace(ht,F)),L($+1+et+dt),D=M.indexOf(s,x),$=M.indexOf(F,x),k&&(st(),ct))return pt();if(S&&A.length>=S)return pt(!0);break}X.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:A.length,index:x}),$++}}else if(w&&d.length===0&&M.substring(x,x+_t)===w){if(C===-1)return pt();x=C+dt,C=M.indexOf(f,x),D=M.indexOf(s,x)}else if(D!==-1&&(D<C||C===-1))d.push(M.substring(x,D)),x=D+Y,D=M.indexOf(s,x);else{if(C===-1)break;if(d.push(M.substring(x,C)),L(C+dt),k&&(st(),ct))return pt();if(S&&A.length>=S)return pt(!0)}return vt();function Z(ft){A.push(ft),H=x}function jt(ft){var wt=0;return wt=ft!==-1&&(ft=M.substring($+1,ft))&&ft.trim()===""?ft.length:wt}function vt(ft){return y||(ft===void 0&&(ft=M.substring(x)),d.push(ft),x=K,Z(d),k&&st()),pt()}function L(ft){x=ft,Z(d),d=[],C=M.indexOf(f,x)}function pt(ft){if(a.header&&!T&&A.length&&!xt){var wt=A[0],Nt={},V=new Set(wt);let Rt=!1;for(let Wt=0;Wt<wt.length;Wt++){let Pt=wt[Wt];if(Nt[Pt=I(a.transformHeader)?a.transformHeader(Pt,Wt):Pt]){let Xt,se=Nt[Pt];for(;Xt=Pt+"_"+se,se++,V.has(Xt););V.add(Xt),wt[Wt]=Xt,Nt[Pt]++,Rt=!0,(St=St===null?{}:St)[Xt]=Pt}else Nt[Pt]=1,wt[Wt]=Pt;V.add(Pt)}Rt&&console.warn("Duplicate headers found and renamed."),xt=!0}return{data:A,errors:X,meta:{delimiter:s,linebreak:f,aborted:ct,truncated:!!ft,cursor:H+(T||0),renamedHeaders:St}}}function st(){g(pt()),A=[],X=[]}},this.abort=function(){ct=!0},this.getCharIndex=function(){return x}}function gt(a){var s=a.data,f=i[s.workerId],w=!1;if(s.error)f.userError(s.error,s.file);else if(s.results&&s.results.data){var g={abort:function(){w=!0,Et(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:It,resume:It};if(I(f.userStep)){for(var S=0;S<s.results.data.length&&(f.userStep({data:s.results.data[S],errors:s.results.errors,meta:s.results.meta},g),!w);S++);delete s.results}else I(f.userChunk)&&(f.userChunk(s.results,g,s.file),delete s.results)}s.finished&&!w&&Et(s.workerId,s.results)}function Et(a,s){var f=i[a];I(f.userComplete)&&f.userComplete(s),f.terminate(),delete i[a]}function It(){throw new Error("Not implemented.")}function tt(a){if(typeof a!="object"||a===null)return a;var s,f=Array.isArray(a)?[]:{};for(s in a)f[s]=tt(a[s]);return f}function bt(a,s){return function(){a.apply(s,arguments)}}function I(a){return typeof a=="function"}return h.parse=function(a,s){var f=(s=s||{}).dynamicTyping||!1;if(I(f)&&(s.dynamicTypingFunction=f,f={}),s.dynamicTyping=f,s.transform=!!I(s.transform)&&s.transform,!s.worker||!h.WORKERS_SUPPORTED)return f=null,h.NODE_STREAM_INPUT,typeof a=="string"?(a=(w=>w.charCodeAt(0)!==65279?w:w.slice(1))(a),f=new(s.download?Q:it)(s)):a.readable===!0&&I(a.read)&&I(a.on)?f=new G(s):(v.File&&a instanceof File||a instanceof Object)&&(f=new B(s)),f.stream(a);(f=(()=>{var w;return!!h.WORKERS_SUPPORTED&&(w=(()=>{var g=v.URL||v.webkitURL||null,S=R.toString();return h.BLOB_URL||(h.BLOB_URL=g.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",S,")();"],{type:"text/javascript"})))})(),(w=new v.Worker(w)).onmessage=gt,w.id=U++,i[w.id]=w)})()).userStep=s.step,f.userChunk=s.chunk,f.userComplete=s.complete,f.userError=s.error,s.step=I(s.step),s.chunk=I(s.chunk),s.complete=I(s.complete),s.error=I(s.error),delete s.worker,f.postMessage({input:a,config:s,workerId:f.id})},h.unparse=function(a,s){var f=!1,w=!0,g=",",S=`\r
`,rt='"',St=rt+rt,xt=!1,F=null,ot=!1,x=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||h.BAD_DELIMITERS.filter(function(T){return s.delimiter.indexOf(T)!==-1}).length||(g=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(f=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(xt=s.skipEmptyLines),typeof s.newline=="string"&&(S=s.newline),typeof s.quoteChar=="string"&&(rt=s.quoteChar),typeof s.header=="boolean"&&(w=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");F=s.columns}s.escapeChar!==void 0&&(St=s.escapeChar+rt),s.escapeFormulae instanceof RegExp?ot=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(ot=/^[=+\-@\t\r].*$/)}})(),new RegExp(W(rt),"g"));if(typeof a=="string"&&(a=JSON.parse(a)),Array.isArray(a)){if(!a.length||Array.isArray(a[0]))return ct(null,a,xt);if(typeof a[0]=="object")return ct(F||Object.keys(a[0]),a,xt)}else if(typeof a=="object")return typeof a.data=="string"&&(a.data=JSON.parse(a.data)),Array.isArray(a.data)&&(a.fields||(a.fields=a.meta&&a.meta.fields||F),a.fields||(a.fields=Array.isArray(a.data[0])?a.fields:typeof a.data[0]=="object"?Object.keys(a.data[0]):[]),Array.isArray(a.data[0])||typeof a.data[0]=="object"||(a.data=[a.data])),ct(a.fields||[],a.data||[],xt);throw new Error("Unable to serialize unrecognized input");function ct(T,y,K){var Y="",dt=(typeof T=="string"&&(T=JSON.parse(T)),typeof y=="string"&&(y=JSON.parse(y)),Array.isArray(T)&&0<T.length),_t=!Array.isArray(y[0]);if(dt&&w){for(var k=0;k<T.length;k++)0<k&&(Y+=g),Y+=M(T[k],k);0<y.length&&(Y+=S)}for(var A=0;A<y.length;A++){var X=(dt?T:y[A]).length,d=!1,H=dt?Object.keys(y[A]).length===0:y[A].length===0;if(K&&!dt&&(d=K==="greedy"?y[A].join("").trim()==="":y[A].length===1&&y[A][0].length===0),K==="greedy"&&dt){for(var ut=[],J=0;J<X;J++){var D=_t?T[J]:J;ut.push(y[A][D])}d=ut.join("").trim()===""}if(!d){for(var C=0;C<X;C++){0<C&&!H&&(Y+=g);var ht=dt&&_t?T[C]:C;Y+=M(y[A][ht],C)}A<y.length-1&&(!K||0<X&&!H)&&(Y+=S)}}return Y}function M(T,y){var K,Y;return T==null?"":T.constructor===Date?JSON.stringify(T).slice(1,25):(Y=!1,ot&&typeof T=="string"&&ot.test(T)&&(T="'"+T,Y=!0),K=T.toString().replace(x,St),(Y=Y||f===!0||typeof f=="function"&&f(T,y)||Array.isArray(f)&&f[y]||((dt,_t)=>{for(var k=0;k<_t.length;k++)if(-1<dt.indexOf(_t[k]))return!0;return!1})(K,h.BAD_DELIMITERS)||-1<K.indexOf(g)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?rt+K+rt:K)}},h.RECORD_SEP=String.fromCharCode(30),h.UNIT_SEP=String.fromCharCode(31),h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!_&&!!v.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=yt,h.ParserHandle=mt,h.NetworkStreamer=Q,h.FileStreamer=B,h.StringStreamer=it,h.ReadableStreamStreamer=G,v.jQuery&&((m=v.jQuery).fn.parse=function(a){var s=a.config||{},f=[];return this.each(function(S){if(!(m(this).prop("tagName").toUpperCase()==="INPUT"&&m(this).attr("type").toLowerCase()==="file"&&v.FileReader)||!this.files||this.files.length===0)return!0;for(var rt=0;rt<this.files.length;rt++)f.push({file:this.files[rt],inputElem:this,instanceConfig:m.extend({},s)})}),w(),this;function w(){if(f.length===0)I(a.complete)&&a.complete();else{var S,rt,St,xt,F=f[0];if(I(a.before)){var ot=a.before(F.file,F.inputElem);if(typeof ot=="object"){if(ot.action==="abort")return S="AbortError",rt=F.file,St=F.inputElem,xt=ot.reason,void(I(a.error)&&a.error({name:S},rt,St,xt));if(ot.action==="skip")return void g();typeof ot.config=="object"&&(F.instanceConfig=m.extend(F.instanceConfig,ot.config))}else if(ot==="skip")return void g()}var x=F.instanceConfig.complete;F.instanceConfig.complete=function(ct){I(x)&&x(ct,F.file,F.inputElem),g()},h.parse(F.file,F.instanceConfig)}}function g(){f.splice(0,1),w()}}),E&&(v.onmessage=function(a){a=a.data,h.WORKER_ID===void 0&&a&&(h.WORKER_ID=a.workerId),typeof a.input=="string"?v.postMessage({workerId:h.WORKER_ID,results:h.parse(a.input,a.config),finished:!0}):(v.File&&a.input instanceof File||a.input instanceof Object)&&(a=h.parse(a.input,a.config))&&v.postMessage({workerId:h.WORKER_ID,results:a,finished:!0})}),(Q.prototype=Object.create(j.prototype)).constructor=Q,(B.prototype=Object.create(j.prototype)).constructor=B,(it.prototype=Object.create(it.prototype)).constructor=it,(G.prototype=Object.create(j.prototype)).constructor=G,h})});var jr={};Br(jr,{default:()=>Fe});module.exports=zr(jr);var Vn=require("obsidian");var In={sortOrder:"timestamp",markdownFolderPath:""};var zt=require("obsidian"),qe=class extends zt.PluginSettingTab{constructor(m,_){super(m,_);this.plugin=_}async display(){let{containerEl:m}=this;m.empty(),m.createEl("h1",{text:"Kindle Vocabulary Sync Settings"}),new zt.Setting(m).setName("Sort Order").setDesc("Choose how to sort your markdown file.").addDropdown(h=>{h.addOption("timestamp","Newest First (Timestamp)").addOption("unlearned","Unlearned First"),h.setValue(this.plugin.settings.sortOrder||"timestamp"),h.onChange(async j=>{this.plugin.settings.sortOrder=j,await this.plugin.saveSettings(),new zt.Notice(`Sort order set to "${j}"`)})}),new zt.Setting(m).setName("Markdown Output Folder").setDesc("Choose the folder to save your markdown file.").addDropdown(h=>{let j=this.app.vault.getAllLoadedFiles().filter(B=>B instanceof zt.TFolder),Q=this.plugin.settings.markdownFolderPath||"";h.addOption("","Vault root");for(let B of j)h.addOption(B.path,B.path);h.setValue(Q),h.onChange(async B=>{this.plugin.settings.markdownFolderPath=B,await this.plugin.saveSettings(),new zt.Notice(`Markdown folder set to: ${B||"Vault root"}`)})});let i=new zt.Setting(m).setName("Sponsor").setDesc("Developed and maintained by Truong Gia Bao").settingEl.createDiv().createEl("a",{href:"https://www.buymeacoffee.com/bao-tg"});i.setAttr("target","_blank");let U=i.createEl("img",{attr:{src:"https://cdn.buymeacoffee.com/buttons/v2/default-violet.png",alt:"Buy Me a Coffee"}});U.style.height="40px",U.style.borderRadius="8px",U.style.marginTop="1px",U.style.marginBottom="1px"}};var kt=require("obsidian"),Nn=Ae(Pe()),Ce=class extends kt.Modal{constructor(m){super(m);this.allowedExtensions=new Set(["db","sqlite","db3"]);this.targetFolder=".obsidian/plugins/obsidian-kindle-vocab-plugin/src/data";this.targetFileName="vocab.db"}onOpen(){let{contentEl:m}=this;m.empty(),m.createEl("h2",{text:"Upload a Vocabulary File (DB)"}),this.fileInputEl=m.createEl("input",{type:"file",attr:{accept:".db,.sqlite,.db3"}}),new kt.ButtonComponent(m).setButtonText("Upload").setCta().onClick(()=>this.handleUpload()),new kt.ButtonComponent(m).setButtonText("Cancel").onClick(()=>this.close())}async handleUpload(){var i;let m=this.fileInputEl.files;if(!m||m.length===0){new kt.Notice("No file selected.");return}let _=m[0],E=((i=_.name.split(".").pop())==null?void 0:i.toLowerCase())||"";if(!this.allowedExtensions.has(E)){new kt.Notice("Invalid file type. Please upload a valid database file.");return}try{let U=new Uint8Array(await _.arrayBuffer()),h=await(0,Nn.default)({locateFile:it=>`https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/${it}`}),j=this.app.vault,Q=(0,kt.normalizePath)(`${this.targetFolder}/${this.targetFileName}`);await j.adapter.exists(Q)?(await this.mergeDatabases(h,Q,U),new kt.Notice("\u2705 Database updated (excluding MAIN table).")):(await this.saveFile(U),new kt.Notice("\u2705 vocab.db uploaded successfully."))}catch(U){console.error(U),new kt.Notice("\u274C Error processing the database file.")}finally{this.close()}}async mergeDatabases(m,_,E){var G,mt;let U=await this.app.vault.adapter.readBinary(_),h=new m.Database(new Uint8Array(U)),j=new m.Database(E),Q=j.exec("SELECT name FROM sqlite_master WHERE type='table';"),B=((mt=(G=Q==null?void 0:Q[0])==null?void 0:G.values)==null?void 0:mt.map(W=>W[0]).filter(W=>W!=="MAIN"))||[];for(let W of B){let yt=j.exec(`SELECT sql FROM sqlite_master WHERE name='${W}' AND type='table';`);if(yt.length===0)continue;h.run(`DROP TABLE IF EXISTS ${W};`),h.run(yt[0].values[0][0]);let gt=j.exec(`SELECT * FROM ${W};`);if(gt.length===0)continue;let{columns:Et,values:It}=gt[0];for(let tt of It){let bt=tt.map(()=>"?").join(", ");h.run(`INSERT INTO ${W} (${Et.join(", ")}) VALUES (${bt});`,tt)}}let it=h.export();await this.saveFile(new Uint8Array(it))}async saveFile(m){let _=this.app.vault,E=(0,kt.normalizePath)(this.targetFolder),i=(0,kt.normalizePath)(`${this.targetFolder}/${this.targetFileName}`);await _.adapter.exists(E)||await this.createFolderRecursively(E),await _.adapter.exists(i)&&await _.adapter.remove(i),await _.createBinary(i,m)}async createFolderRecursively(m){let _=m.split("/"),E="";for(let i of _)E=(0,kt.normalizePath)(`${E}/${i}`),await this.app.vault.adapter.exists(E)||await this.app.vault.createFolder(E)}onClose(){this.contentEl.empty()}};var Mt=require("obsidian"),De=class extends Mt.Modal{constructor(m){super(m);this.allowedExtensions=new Set(["csv"]);this.targetFolder=".obsidian/plugins/obsidian-kindle-vocab-plugin/src/data";this.targetFileName="dictionary.csv"}onOpen(){let{contentEl:m}=this;m.empty(),m.createEl("h2",{text:"Upload a Dictionary File (CSV)"}),this.fileInputEl=m.createEl("input",{type:"file",attr:{accept:".csv"}}),new Mt.ButtonComponent(m).setButtonText("Upload").setCta().onClick(()=>this.handleUpload()),new Mt.ButtonComponent(m).setButtonText("Cancel").onClick(()=>this.close())}async handleUpload(){var U;let m=this.fileInputEl.files;if(!m||m.length===0){new Mt.Notice("No file selected.");return}let _=m[0],E=((U=_.name.split(".").pop())==null?void 0:U.toLowerCase())||"";if(!this.allowedExtensions.has(E)){new Mt.Notice("Invalid file type. Please upload a valid CSV file.");return}let i=1024;if(_.size>i*1024*1024){new Mt.Notice(`File too large. Max allowed size: ${i}MB.`);return}try{let h=await _.arrayBuffer();await this.saveFile(new Uint8Array(h)),new Mt.Notice("\u2705 Dictionary uploaded and saved successfully!")}catch(h){console.error(h),new Mt.Notice("\u274C Failed to save the dictionary file.")}finally{this.close()}}async saveFile(m){let _=this.app.vault,E=(0,Mt.normalizePath)(this.targetFolder),i=(0,Mt.normalizePath)(`${this.targetFolder}/${this.targetFileName}`);await _.adapter.exists(E)||await this.createFolderRecursively(E),await _.adapter.exists(i)&&await _.adapter.remove(i),await _.createBinary(i,m)}async createFolderRecursively(m){let _=m.split("/"),E="";for(let i of _)E=(0,Mt.normalizePath)(`${E}/${i}`),await this.app.vault.adapter.exists(E)||await this.app.vault.createFolder(E)}onClose(){this.contentEl.empty()}};var Ft=require("obsidian"),Wn=Ae(Un()),$n=Ae(Pe());var tn=require("obsidian");function Le(){return(0,tn.normalizePath)(".obsidian/plugins/obsidian-kindle-vocab-plugin/src/data/vocab.db")}function Bn(){return(0,tn.normalizePath)(".obsidian/plugins/obsidian-kindle-vocab-plugin/src/data/dictionary.csv")}var zn=Ae(Pe());var en=require("obsidian");async function jn(R,v){var B,it,G,mt;let m=`
		SELECT word, context, book_title, information, learned
		FROM MAIN
	`;v==="timestamp"?m+=" ORDER BY rowid DESC":v==="unlearned"&&(m+=" ORDER BY learned ASC, rowid DESC");let _=R.exec(m);if(!_.length||!_[0].values.length)return`# Recent Lookups

_(No entries found)_`;let{columns:E,values:i}=_[0],U=i.filter(W=>W[E.indexOf("learned")]===1).length,h=i.length,j=Math.round(U/h*100),Q=`# Recent Lookups

\u{1F4D8} You\u2019ve learned **${U}** out of **${h}** words (${j}%)

`;for(let W of i){let yt=((B=W[E.indexOf("word")])==null?void 0:B.toString().trim())||"(unknown)",gt=((it=W[E.indexOf("context")])==null?void 0:it.toString().trim())||"(none)",Et=((G=W[E.indexOf("book_title")])==null?void 0:G.toString().trim())||"(none)",It=((mt=W[E.indexOf("information")])==null?void 0:mt.toString().trim())||"(none)",tt=W[E.indexOf("learned")]===1;Q+=`## ${yt}

`,Q+=`- **Context**: ${gt}
`,Q+=`- **Book Title**: ${Et}
`,Q+=`- **Learned**: <input type="checkbox" data-word="${yt}" ${tt?"checked":""} />
`,Q+=`- **Definition**:

${It}

---
`}return Q}function oe(R){let v=document.querySelectorAll(".markdown-preview-view");if(!v.length){console.warn("[VocabPlugin] No markdown-preview-view found, retrying..."),setTimeout(()=>oe(R),500);return}v._vocab_listener_attached||(v._vocab_listener_attached=!0,v.forEach(m=>{m.addEventListener("click",async _=>{let E=_.target;if((E==null?void 0:E.tagName)!=="INPUT")return;let i=E;if(i.type!=="checkbox"||!i.dataset.word)return;let U=i.dataset.word,h=i.checked?1:0;try{let j=await(0,zn.default)({locateFile:W=>`https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/${W}`}),Q=Le(),B=await R.vault.adapter.readBinary(Q),it=new j.Database(new Uint8Array(B)),G=it.prepare("UPDATE MAIN SET learned = ? WHERE word = ?");G.run([h,U]),G.free();let mt=it.export();await R.vault.adapter.writeBinary(Q,mt),it.close(),new en.Notice(`\u2705 ${U} marked as ${h?"learned":"unlearned"}`)}catch(j){console.error(j),new en.Notice("\u274C Failed to update word status.")}})}))}var ae=class extends Ft.Modal{constructor(m,_){super(m);this.plugin=_}onOpen(){let{contentEl:m}=this;m.empty(),m.createEl("h2",{text:"Sync Your Vocabulary Builder"}),m.createEl("p",{text:"This will synchronize your Kindle lookups and create a markdown summary. Make sure your vocab database and dictionary file are ready."});let _=m.createDiv({cls:"sync-button-container"});new Ft.ButtonComponent(_).setButtonText("\u{1F504} Start Sync").setCta().onClick(()=>this.syncDatabase())}async syncDatabase(){var m,_,E,i,U;try{new Ft.Notice("Starting sync...");let h=await(0,$n.default)({locateFile:f=>`https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/${f}`}),j=Le();if(!await this.app.vault.adapter.exists(j))throw new Error("\u274C Vocab file not found.");let Q=await this.app.vault.adapter.readBinary(j),B=new h.Database(new Uint8Array(Q));B.run(`
				CREATE TABLE IF NOT EXISTS MAIN (
					word TEXT PRIMARY KEY,
					information TEXT,
					context TEXT,
					book_title TEXT,
					learned INTEGER DEFAULT 0
				)
			`);let it=B.exec(`
				SELECT w.word, l.usage, bi.title
				FROM LOOKUPS l
				JOIN WORDS w ON l.word_key = w.id
				JOIN BOOK_INFO bi ON l.book_key = bi.id
			`),G=it.length?it[0].values:[],mt=0,W=B.prepare("SELECT 1 FROM MAIN WHERE word = ?"),yt=B.prepare(`
				INSERT INTO MAIN (word, information, context, book_title, learned)
				VALUES (?, '', ?, ?, 0)
			`);for(let[f,w,g]of G)f&&(W.bind([f]),W.step()||(yt.run([f,w||"",g||""]),mt++),W.reset());W.free(),yt.free();let gt=Bn();if(await this.app.vault.adapter.exists(gt)){let f=await this.app.vault.adapter.read(gt),w=await this.parseCsv(f),g=B.prepare("UPDATE MAIN SET information = ? WHERE word = ?");for(let[S,rt]of w)g.run([rt,S]);g.free()}this.plugin.settings||await((_=(m=this.plugin).loadSettings)==null?void 0:_.call(m));let Et=((E=this.plugin.settings)==null?void 0:E.sortOrder)||"timestamp",It=await jn(B,Et),tt=((U=(i=this.plugin.settings)==null?void 0:i.markdownFolderPath)==null?void 0:U.trim())||"",bt="My Vocabulary Builder.md",I=(0,Ft.normalizePath)(tt?`${tt}/${bt}`:bt);await this.app.vault.adapter.write(I,It);let a=B.export();await this.app.vault.adapter.writeBinary(j,a),B.close(),new Ft.Notice(`\u2705 Sync complete! ${mt} new word(s) added.`);let s=this.app.vault.getAbstractFileByPath(I);s instanceof Ft.TFile&&(await this.app.workspace.getLeaf(!0).openFile(s),setTimeout(()=>oe(this.app),500))}catch(h){console.error(h),new Ft.Notice(h.message||"\u274C Sync failed. Check console for details.")}finally{this.close()}}async parseCsv(m){let _=Wn.parse(m,{header:!1,skipEmptyLines:!0}),E=[];for(let i=1;i<_.data.length;i++){let U=_.data[i];U.length>=2&&E.push([U[0].trim(),U[1].trim()])}return E}onClose(){this.contentEl.empty()}};function Qn(R){R.addCommand({id:"upload-vocab-database",name:"Upload your vocabulary database",callback:()=>{new Ce(R.app).open()}}),R.addCommand({id:"sync-vocabulary-builder",name:"Sync the vocabulary builder to your Obsidian",callback:()=>{new ae(R.app,R).open()}}),R.addCommand({id:"upload-dictionary-file",name:"Upload your dictionary file",callback:()=>{new De(R.app).open()}})}function Hn(R){R.addRibbonIcon("book-open","Sync Kindle Vocabulary",()=>{new ae(R.app,this).open()}).addClass("my-plugin-sync-ribbon")}var Fe=class extends Vn.Plugin{async onload(){await this.loadSettings(),this.registerEvent(this.app.workspace.on("file-open",()=>{setTimeout(()=>oe(this.app),1e3)})),setTimeout(()=>oe(this.app),2e3),Hn(this),Qn(this),this.addStatusBarItem().setText("Status Bar Text"),this.addSettingTab(new qe(this.app,this))}onunload(){}async loadSettings(){this.settings=Object.assign({},In,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
/*! Bundled license information:

papaparse/papaparse.min.js:
  (* @license
  Papa Parse
  v5.5.2
  https://github.com/mholt/PapaParse
  License: MIT
  *)
*/
